/*
 * jquery-mobile-toast - v0.0.5
 * A jQuery Mobile Android-like Toast Plugin.
 * https://github.com/TobiasHennig/jquery-mobile-toast
 *
 * Copyright (c) 2014 Tobias Hennig
 * Licensed under the MIT license.
 */

!function(a,b){"use strict";a.widget("mobile.toast",{version:"0.0.5",options:{message:"",duration:1500,classOnOpen:"",classOnClose:"",beforeposition:null,afterclose:null,afteropen:null},_create:function(){this.$p=a.mobile.activePage,this.$c=a(":jqmData(role='content')",this.$p),this.$toast=this._renderToast(),this._addToPage(),this.reposition(),this.open()},_renderText:function(){return a("<p>"+this.options.message+"</p>").css({"max-width":"160px",margin:"0",padding:"6px 12px","font-size":"16px",color:"#FFFFFF","text-shadow":"none",border:"none"})},_renderToast:function(){return a("<div data-role='toast'></div>").html(this._renderText()).css({display:"none",position:"fixed","z-index":"3000","background-color":"#34495e","-webkit-border-radius":"6px","border-radius":"6px","background-clip":"padding-box"}).addClass(this.options.classOnOpen)},_addToPage:function(){this.$c.append(this.$toast)},_getToastCoordinates:function(){var a={width:this.$toast.width(),height:this.$toast.height()},b=this._getWindowCoordinates(),c=b.height>=b.width?80:80;return{top:b.height*c/100,left:b.width/2-a.width/2}},_getWindowCoordinates:function(){var c=a.mobile.window;return{x:c.scrollLeft(),y:c.scrollTop(),width:b.innerWidth||c.width(),height:b.innerHeight||c.height()}},_destroy:function(){this.$toast.remove()},_setOptions:function(){this._superApply(arguments)},_setOption:function(b,c){("message"!==b||(c=a.trim(c),""!==c))&&this._super(b,c)},_beforeEnd:function(){this._trigger("beforeClose"),""!==this.options.classOnClose?this.$toast.addClass(this.options.classOnClose).on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",a.proxy(function(){this._end()},this)):this.$toast.fadeOut(500,a.proxy(this._end,this))},_end:function(){this.destroy(),this._trigger("afterclose")},reposition:function(){this._trigger("beforeposition");var a=this._getToastCoordinates();this.$toast.css({top:a.top,left:a.left})},open:function(){this.$toast.css({display:"inline-block"}),this._trigger("afteropen"),b.setTimeout(a.proxy(this._beforeEnd,this),this.options.duration)}})}(jQuery,window,document);